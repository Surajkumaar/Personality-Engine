build:
  command: cd backend && pip install -r requirements.txt
  
start:
  command: cd backend && uvicorn app:app --host 0.0.0.0 --port $PORT
  
environment:
  - OPENROUTER_API_KEY
  - ENVIRONMENT=production
  
healthcheck:
  path: /health
  interval: 30
  timeout: 10
  retries: 3

deploy:
  restartPolicyType: ON_FAILURE
  restartPolicyMaxRetries: 10